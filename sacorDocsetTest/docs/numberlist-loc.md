---
title: 상시 암호화 마법사 | Microsoft 문서
ms.custom: ''
ms.date: 05/04/2016
ms.prod: sql
ms.reviewer: vanto
ms.technology: security
ms.topic: conceptual
f1_keywords:
- sql13.swb.alwaysencryptedwizard.encryption.f1
- sql13.swb.alwaysencryptedwizard.f1
- sql.swb.alwaysencryptedwizard.masterkey.f1
helpviewer_keywords:
- Wizard, Always Encrypted
ms.assetid: 68daddc9-ce48-49aa-917f-6dec86ad5af5
author: aliceku
ms.author: aliceku
manager: craigg
monikerRange: =azuresqldb-current||>=sql-server-2016||=sqlallproducts-allversions||>=sql-server-linux-2017||=azuresqldb-mi-current
ms.openlocfilehash: 696d3bfc454e396f8cc590d3178f8ae54b89128a
ms.sourcegitcommit: a94cf79160e22fa8b4bafe3e6e50bb54e20b1bca
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/23/2019
ms.locfileid: "54805719"
---
# <a name="always-encrypted-wizard"></a><span data-ttu-id="29a2a-102">상시 암호화 마법사</span><span class="sxs-lookup"><span data-stu-id="29a2a-102">Always Encrypted Wizard</span></span>
[!INCLUDE[appliesto-ss-asdb-xxxx-xxx-md](../../../includes/appliesto-ss-asdb-xxxx-xxx-md.md)]

<span data-ttu-id="29a2a-103">**상시 암호화 마법사** 를 사용하여 SQL Server 데이터베이스에 저장된 중요 데이터를 보호할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-103">Use the **Always Encrypted Wizard** to help protect sensitive data  stored in a SQL Server database.</span></span> <span data-ttu-id="29a2a-104">상시 암호화를 사용하면 클라이언트가 클라이언트 애플리케이션의 중요한 데이터를 암호화하고 암호화 키를 SQL Server에 표시하지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-104">Always Encrypted allows clients to encrypt sensitive data inside client applications and never reveal the encryption keys to SQL Server.</span></span> <span data-ttu-id="29a2a-105">따라서 상시 암호화는 데이터를 소유하고 볼 수 있는 사람과 데이터를 관리하지만 액세스 권한이 없어야 하는 사람을 분리합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-105">As a result, Always Encrypted provides a separation between those who own the data (and can view it) and those who manage the data (but should have no access).</span></span>  <span data-ttu-id="29a2a-106">기능에 대한 자세한 내용은 [상시 암호화&#40;데이터베이스 엔진&#41;](../../../relational-databases/security/encryption/always-encrypted-database-engine.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="29a2a-106">For a full description of the feature, see [Always Encrypted &#40;Database Engine&#41;](../../../relational-databases/security/encryption/always-encrypted-database-engine.md).</span></span>  
 
 - <span data-ttu-id="29a2a-107">마법사를 사용하여 Always Encrypted를 구성하고 클라이언트 애플리케이션에서 사용하는 방법을 보여 주는 종합 연습은 [SQL Database 자습서: Always Encrypted로 중요한 데이터 보호](https://azure.microsoft.com/documentation/articles/sql-database-always-encrypted/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="29a2a-107">For an end-to-end walkthrough that shows how to configure Always Encrypted with the wizard and use it in a client application, see [SQL Database tutorial: Protect sensitive data with Always Encrypted](https://azure.microsoft.com/documentation/articles/sql-database-always-encrypted/).</span></span>  
 
 - <span data-ttu-id="29a2a-108">마법사 사용이 포함된 비디오는 [상시 암호화를 사용하여 중요 데이터 보안 유지](https://channel9.msdn.com/events/DataDriven/SQLServer2016/AlwaysEncrypted)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="29a2a-108">For a video that includes using the wizard, see [Keeping Sensitive Data Secure with Always Encrypted](https://channel9.msdn.com/events/DataDriven/SQLServer2016/AlwaysEncrypted).</span></span> <span data-ttu-id="29a2a-109">그리고 [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 보안 팀 블로그 [SSMS 암호화 마법사 - 간단한 몇 단계로 상시 암호화 설정](https://blogs.msdn.com/b/sqlsecurity/archive/2015/11/01/ssms-encryption-wizard-enabling-always-encrypted-made-easy.aspx)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="29a2a-109">Also, see the [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] Security Team blog [SSMS Encryption Wizard - Enabling Always Encrypted in a Few Easy Steps](https://blogs.msdn.com/b/sqlsecurity/archive/2015/11/01/ssms-encryption-wizard-enabling-always-encrypted-made-easy.aspx).</span></span>  
 
 - <span data-ttu-id="29a2a-110">**사용 권한:** 이 마법사를 사용하여 암호화된 열을 쿼리하고 키를 선택하려면 `VIEW ANY COLUMN MASTER KEY DEFINITION` 및 `VIEW ANY COLUMN ENCRYPTION KEY DEFINITION` 사용 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-110">**Permissions:** To query encrypted columns and to select keys using this wizard you must have the `VIEW ANY COLUMN MASTER KEY DEFINITION` and `VIEW ANY COLUMN ENCRYPTION KEY DEFINITION` permissions.</span></span> <span data-ttu-id="29a2a-111">새 키를 만들려면 `ALTER ANY COLUMN MASTER KEY` 및 `ALTER ANY COLUMN ENCRYPTION KEY` 사용 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-111">To create new keys, you must also have the `ALTER ANY COLUMN MASTER KEY` and `ALTER ANY COLUMN ENCRYPTION KEY` permissions.</span></span>  
 
 #### <a name="to-open-the-always-encrypted-wizard"></a><span data-ttu-id="29a2a-112">상시 암호화 마법사를 열려면</span><span class="sxs-lookup"><span data-stu-id="29a2a-112">To Open the Always Encrypted Wizard</span></span>
 
 1.  <span data-ttu-id="29a2a-113">[!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 의 개체 탐색기 구성 요소를 사용하여 [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)]에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-113">Connect to your [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] with the Object Explorer component of [!INCLUDE[ssManStudioFull](../../../includes/ssmanstudiofull-md.md)].</span></span>  
   
 2.  <span data-ttu-id="29a2a-114">데이터베이스를 마우스 오른쪽 단추로 클릭하고 **태스크**를 가리킨 다음 **열 암호화**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-114">Right-click your database, point to **Tasks**, and then click **Encrypt Columns**.</span></span>  
   
 ## <a name="column-selection-page"></a><span data-ttu-id="29a2a-115">열 선택 페이지</span><span class="sxs-lookup"><span data-stu-id="29a2a-115">Column Selection Page</span></span>
 - <span data-ttu-id="29a2a-116">테이블과 열을 찾은 다음 선택한 열의 암호화 유형(결정적 또는 임의)과 암호화 키를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-116">Locate a table and column, and then select an encryption type  (deterministic or randomized) and an encryption key for selected columns.</span></span> <span data-ttu-id="29a2a-117">현재 암호화된 열의 암호화를 해제하려면 **일반 텍스트**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-117">To decrypt an column that is currently encrypted, select **Plaintext**.</span></span> <span data-ttu-id="29a2a-118">열 암호화 키를 회전하려면 다른 암호화 키를 선택합니다. 그러면 마법사가 열의 암호화를 해제하고 새 키로 열을 다시 암호화합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-118">To rotate a column encryption key, select different encryption key and the wizard will decrypt the column and re-encrypt the column with the new key.</span></span> <span data-ttu-id="29a2a-119">( [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] 에서 메모리 내 임시 테이블을 암호화할 수 있지만 이 마법사로 구성할 수는 없습니다.)</span><span class="sxs-lookup"><span data-stu-id="29a2a-119">(Encrypting temporal and In-Memory tables is supported by [!INCLUDE[ssNoVersion](../../../includes/ssnoversion-md.md)] but cannot be configured by this wizard.)</span></span>  
 
## <a name="master-key-configuration-page"></a><span data-ttu-id="29a2a-120">마스터 키 구성 페이지</span><span class="sxs-lookup"><span data-stu-id="29a2a-120">Master Key Configuration Page</span></span>  
 - <span data-ttu-id="29a2a-121">Windows 인증서 저장소 또는 Azure 키 자격 증명 모음에 새 열 마스터 키를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-121">Create a new column master key in the Windows Certificate Store or Azure Key Vault.</span></span> <span data-ttu-id="29a2a-122">자세한 내용은 키 스토리지 아래 링크를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="29a2a-122">For more information, see the links below under Key Storage.</span></span>  
 
 - <span data-ttu-id="29a2a-123">열 선택 페이지에서 자동 생성되는 열 암호화 키를 선택한 경우 생성된 열 암호화 키를 암호화할 때 적용할 열 마스터 키를 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-123">If you chose an auto-generated column encryption key in the Column Selection page, you must configure a column master key that the generated column encryption key will be encrypted with.</span></span> <span data-ttu-id="29a2a-124">데이터베이스에 이미 열 마스터 키를 정의한 경우 해당 키를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-124">If you already have a column master key defined in your database, you can select it.</span></span> <span data-ttu-id="29a2a-125">(기존 열 마스터 키를 사용하려면 사용자가 키에 대한 액세스 권한이 있어야 합니다.) 또는 선택한 열 저장소(Windows 인증서 저장소 또는 Azure 키 자격 증명 모음)에 열 마스터 키를 만들고 데이터베이스에서 키를 정의할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-125">(To use an existing column master key, the user must have permission to access the key.) Or, you can generate a column master key in a selected key store (Windows Certificate Store or Azure Key Vault) and define the key in the database.</span></span>  
 
 ### <a name="key-storage"></a><span data-ttu-id="29a2a-126">**키 스토리지**</span><span class="sxs-lookup"><span data-stu-id="29a2a-126">**Key Storage**</span></span>  
 
 - <span data-ttu-id="29a2a-127">열 마스터 키를 저장할 위치를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-127">Choose where the column master key will be stored.</span></span>  
 
   - <span data-ttu-id="29a2a-128">**Windows 인증서에 마스터 키 저장** 자세한 내용은 [인증서 저장소 사용](/windows/desktop/SecCrypto/using-certificate-stores)</span><span class="sxs-lookup"><span data-stu-id="29a2a-128">**Storing a master key in Windows cert** For more information, see [Using Certificate Stores](/windows/desktop/SecCrypto/using-certificate-stores)</span></span>  
 
   - <span data-ttu-id="29a2a-129">**AKV에 마스터 키 저장** 자세한 내용은 [Azure 키 자격 증명 모음 시작하기](https://azure.microsoft.com/documentation/articles/key-vault-get-started/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="29a2a-129">**Storing a master key in AKV** For more information, see [Get Started with Azure Key Vault](https://azure.microsoft.com/documentation/articles/key-vault-get-started/).</span></span>  
 
 - <span data-ttu-id="29a2a-130">Azure 키 자격 증명 모음에 열 마스터 키를 생성하려면 사용자가 키 자격 증명 모음에 대해 **WrapKey**, **UnwrapKey**, **확인**, **서명** 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-130">To generate a column master key in the Azure Key Vault, the user must have the **WrapKey**, **UnwrapKey**, **Verify**, and **Sign** permissions to the key vault.</span></span> <span data-ttu-id="29a2a-131">사용자는 **가져오기**, **목록**, **만들기**, **삭제**, **업데이트**, **가져오기**, **백업**, **복원** 권한이 필요할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-131">Users might also need the **Get**, **List**, **Create**, **Delete**, **Update**, **Import**, **Backup**, and **Restore** permissions.</span></span> <span data-ttu-id="29a2a-132">자세한 내용은 [Azure Key Vault란?](https://azure.microsoft.com/documentation/articles/key-vault-whatis/) 및 [Set-AzKeyVaultAccessPolicy](https://msdn.microsoft.com/library/mt603625.aspx)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="29a2a-132">For more information, see [What is Azure Key Vault?](https://azure.microsoft.com/documentation/articles/key-vault-whatis/) and   [Set-AzKeyVaultAccessPolicy](https://msdn.microsoft.com/library/mt603625.aspx).</span></span>  
 
 - <span data-ttu-id="29a2a-133">이 마법사는 두 가지 옵션만 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-133">The wizard only supported two options.</span></span> <span data-ttu-id="29a2a-134">하드웨어 보안 모듈 및 고객 저장소는 [CREATE COLUMN MASTER KEY&#40;Transact-SQL&#41;](../../../t-sql/statements/create-column-master-key-transact-sql.md)[!INCLUDE[tsql](../../../includes/tsql-md.md)]를 사용하여 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-134">Hardware Security Modules and customer stores must be configured using [CREATE COLUMN MASTER KEY &#40;Transact-SQL&#41;](../../../t-sql/statements/create-column-master-key-transact-sql.md)[!INCLUDE[tsql](../../../includes/tsql-md.md)].</span></span>  
 
 ## <a name="always-encrypted-terms"></a><span data-ttu-id="29a2a-135">상시 암호화 용어</span><span class="sxs-lookup"><span data-stu-id="29a2a-135">Always Encrypted Terms</span></span>  
 
 - <span data-ttu-id="29a2a-136">**결정적 암호화** 는 지정된 일반 텍스트 값에 대해 항상 동일한 암호화된 값을 생성하는 방법을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-136">**Deterministic encryption** uses a method which always generates the same encrypted value for any given plain text value.</span></span> <span data-ttu-id="29a2a-137">결정적 암호화를 사용하는 경우 암호화된 값을 기반으로 테이블 조인, 동등 여부 기준 필터링 및 그룹화가 가능하지만, 권한이 없는 사용자가 암호화된 열의 패턴을 검사하여 암호화된 값에 대한 정보를 추측할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-137">Using deterministic encryption allows grouping, filtering by equality, and joining tables based on encrypted values, but can also allow unauthorized users to guess information about encrypted values by examining patterns in the encrypted column.</span></span> <span data-ttu-id="29a2a-138">이 약점은 True/False 또는 North/South/East/West 지역과 같은 가능한 암호화된 값의 작은 집합이 있는 경우에 증가합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-138">This weakness is increased when there is a small set of possible encrypted values, such as True/False, or North/South/East/West region.</span></span> <span data-ttu-id="29a2a-139">결정적 암호화에서는 문자 열에 대해 binary2 정렬 순서를 적용하는 열 데이터 정렬을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-139">Deterministic encryption must use a column collation with a binary2 sort order for character columns.</span></span>  
 
 - <span data-ttu-id="29a2a-140">**임의 암호화** 는 예측하기 어려운 방식으로 데이터를 암호화하는 방법을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-140">**Randomized encryption** uses a method that encrypts data in a less predictable manner.</span></span> <span data-ttu-id="29a2a-141">임의 암호화는 더 안전하지만 암호화된 열에서 동등 검색, 그룹화, 인덱싱 및 조인을 금지합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-141">Randomized encryption is more secure, but prevents equality searches, grouping, indexing, and joining on encrypted columns.</span></span>  

 - <span data-ttu-id="29a2a-142">**열 마스터 키** 는 열 암호화 키를 암호화하는 데 사용되는 키를 보호합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-142">**Column master keys** are protecting keys used to encrypt column encryption keys.</span></span> <span data-ttu-id="29a2a-143">열 마스터 키는 신뢰할 수 있는 키 저장소에 저장되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-143">Column master keys must be stored in a trusted key store.</span></span> <span data-ttu-id="29a2a-144">열 마스터 키에 대한 정보는 해당 위치를 포함하여 시스템 카탈로그 뷰에서 데이터베이스에 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-144">Information about column master keys, including their location, is stored in the database in system catalog views.</span></span>  

 - <span data-ttu-id="29a2a-145">**열 암호화 키** 는 데이터베이스 열에 저장된 중요한 데이터를 암호화하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-145">**Column encryption keys** are used to encrypt sensitive data stored in database columns.</span></span> <span data-ttu-id="29a2a-146">열의 모든 값은 단일 열 암호화 키를 사용하여 암호화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-146">All values in a column can be encrypted using a single column encryption key.</span></span> <span data-ttu-id="29a2a-147">열 암호화 키의 암호화된 값은 시스템 카탈로그 뷰에서 데이터베이스에 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-147">Encrypted values of column encryption keys are stored in the database in system catalog views.</span></span> <span data-ttu-id="29a2a-148">백업을 위해 열 암호화 키를 안전한/신뢰할 수 있는 위치에 저장해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="29a2a-148">You should store column encryption keys in a secure/trusted location for backup.</span></span>  

 ## <a name="see-also"></a><span data-ttu-id="29a2a-149">참고 항목</span><span class="sxs-lookup"><span data-stu-id="29a2a-149">See Also</span></span>  
 - [<span data-ttu-id="29a2a-150">상시 암호화&#40;데이터베이스 엔진&#41;</span><span class="sxs-lookup"><span data-stu-id="29a2a-150">Always Encrypted &#40;Database Engine&#41;</span></span>](../../../relational-databases/security/encryption/always-encrypted-database-engine.md)   
 - [<span data-ttu-id="29a2a-151">Azure Key Vault를 사용한 확장 가능 키 관리&#40;SQL Server&#41;</span><span class="sxs-lookup"><span data-stu-id="29a2a-151">Extensible Key Management Using Azure Key Vault &#40;SQL Server&#41;</span></span>](../../../relational-databases/security/encryption/extensible-key-management-using-azure-key-vault-sql-server.md)  